var roi = 
    /* color: #d63000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-91.57620489377224, 29.660380983841605],
           [-91.57620489377224, 29.33167462541983],
           [-91.13400518674099, 29.33167462541983],
           [-91.13400518674099, 29.660380983841605]]],
         [[[-91.38325750607693, 29.542767000246577],
           [-91.38325750607693, 29.377757681360908],
           [-91.19374334592068, 29.377757681360908],
           [-91.19374334592068, 29.542767000246577]]],
         [[[-151.46349952220524, 70.68720540186405],
           [-151.46349952220524, 70.23342669072468],
           [-149.87048194408024, 70.23342669072468],
           [-149.87048194408024, 70.68720540186405]]],
         [[[-148.7010248692593, 70.3893184528091],
           [-148.7010248692593, 70.08190326838977],
           [-147.6518305333218, 70.08190326838977],
           [-147.6518305333218, 70.3893184528091]]],
         [[[-149.49634728722674, 70.54973592756278],
           [-149.49634728722674, 70.21407688600945],
           [-148.26587853722674, 70.21407688600945],
           [-148.26587853722674, 70.54973592756278]]],
         [[[39.03611155731812, 47.31468061046578],
           [39.03611155731812, 46.97000528828891],
           [39.70078440888062, 46.97000528828891],
           [39.70078440888062, 47.31468061046578]]],
         [[[123.76838583855034, 73.5624863614094],
           [123.76838583855034, 71.79095477787484],
           [129.98664755730033, 71.79095477787484],
           [129.98664755730033, 73.5624863614094]]],
         [[[-89.82406341990557, 29.541061917558846],
           [-89.82406341990557, 28.889029196838766],
           [-88.95065033396807, 28.889029196838766],
           [-88.95065033396807, 29.541061917558846]]],
         [[[-90.14266693553057, 30.196038403367933],
           [-90.14266693553057, 29.495650591628966],
           [-89.19234955271807, 29.495650591628966],
           [-89.19234955271807, 30.196038403367933]]],
         [[[-90.75288999026404, 29.673807493311664],
           [-90.75288999026404, 29.010614902641],
           [-89.94539487307654, 29.010614902641],
           [-89.94539487307654, 29.673807493311664]]],
         [[[-91.23714053890527, 29.590249191223457],
           [-91.23714053890527, 29.027427310630046],
           [-90.59444034359277, 29.027427310630046],
           [-90.59444034359277, 29.590249191223457]]],
         [[[-58.751173231404216, -33.920232059279776],
           [-58.751173231404216, -34.48811064770321],
           [-57.946424696247966, -34.48811064770321],
           [-57.946424696247966, -33.920232059279776]]],
         [[[106.07299807796541, 52.449889508946775],
           [106.07299807796541, 52.078398220956664],
           [106.82006839046541, 52.078398220956664],
           [106.82006839046541, 52.449889508946775]]],
         [[[-113.77894874112154, 61.355969987263606],
           [-113.77894874112154, 61.220064094769796],
           [-113.50085731045748, 61.220064094769796],
           [-113.50085731045748, 61.355969987263606]]],
         [[[47.310863515681305, 46.91232305988667],
           [47.310863515681305, 45.40572396903957],
           [49.931102773493805, 45.40572396903957],
           [49.931102773493805, 46.91232305988667]]],
         [[[-165.97673464190342, 63.47307521109259],
           [-165.97673464190342, 62.293970079440605],
           [-162.51604128252842, 62.293970079440605],
           [-162.51604128252842, 63.47307521109259]]],
         [[[109.01532239004572, -6.736845573611453],
           [109.01532239004572, -6.821735224243888],
           [109.1018397240301, -6.821735224243888],
           [109.1018397240301, -6.736845573611453]]],
         [[[-75.97166602422651, 9.449465884047484],
           [-75.97166602422651, 9.397307663622493],
           [-75.90111319829879, 9.397307663622493],
           [-75.90111319829879, 9.449465884047484]]],
         [[[80.58109026788229, 16.108778776339918],
           [80.58109026788229, 15.698033287408203],
           [81.15375262139791, 15.698033287408203],
           [81.15375262139791, 16.108778776339918]]],
         [[[49.21181913003017, 39.49068505668056],
           [49.21181913003017, 39.2379937039625],
           [49.48647733315517, 39.2379937039625],
           [49.48647733315517, 39.49068505668056]]],
         [[[51.26711373442424, 47.09055627795675],
           [51.26711373442424, 46.677098551493756],
           [52.15837960356487, 46.677098551493756],
           [52.15837960356487, 47.09055627795675]]],
         [[[51.55545292409501, 46.94331071786278],
           [51.55545292409501, 46.911071858827086],
           [51.609182935081336, 46.911071858827086],
           [51.609182935081336, 46.94331071786278]]],
         [[[-102.41357452218229, 54.13198043025988],
           [-102.41357452218229, 54.02301002148354],
           [-102.26972228829557, 54.02301002148354],
           [-102.26972228829557, 54.13198043025988]]],
         [[[18.21506680748733, 67.15743901434456],
           [18.21506680748733, 67.12783315953114],
           [18.28991116783889, 67.12783315953114],
           [18.28991116783889, 67.15743901434456]]],
         [[[119.12282616003384, 73.24890857870336],
           [119.12282616003384, 72.87766703338283],
           [120.67189842565884, 72.87766703338283],
           [120.67189842565884, 73.24890857870336]]],
         [[[118.76552423562866, 38.03046847739621],
           [118.76552423562866, 37.47889785467992],
           [119.55928644265991, 37.47889785467992],
           [119.55928644265991, 38.03046847739621]]],
         [[[112.50697266120062, -6.824939278586409],
           [112.50697266120062, -6.94185016423742],
           [112.63262878913031, -6.94185016423742],
           [112.63262878913031, -6.824939278586409]]],
         [[[107.85760873476619, -6.170353282075119],
           [107.85760873476619, -6.233325611497107],
           [107.91648858706111, -6.233325611497107],
           [107.91648858706111, -6.170353282075119]]],
         [[[108.17013859856695, -6.216679977860206],
           [108.17013859856695, -6.271627017151447],
           [108.2278168212232, -6.271627017151447],
           [108.2278168212232, -6.216679977860206]]],
         [[[-94.75291508864679, 59.01078024748766],
           [-94.75291508864679, 58.84528161154367],
           [-94.47551030349054, 58.84528161154367],
           [-94.47551030349054, 59.01078024748766]]]], null, false);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
 //2. Define the date range
var startDate = '2010-01-01';
var endDate = '2013-12-31';

// 3. Load the Landsat 8 Surface Reflectance collection
var landsatCollection = ee.ImageCollection('LANDSAT/LC08/C02/T1') // Surface Reflectance
  .filterDate(startDate, endDate)  // Filter by time
  .filterBounds(roi)  // Filter by region
  .map(function(image) {  // Remove clouds
    var cloudMask = image.select('QA_PIXEL').bitwiseAnd(1 << 3).eq(0);  // Bit 3 = Cloud Mask
    return image.updateMask(cloudMask);  // Apply cloud mask
  });

// 4. Create a cloud-free composite using median pixel values
var cloudFreeComposite = landsatCollection.median().clip(roi);

// 5. Define visualization parameters (True Color RGB)
var visParams = {
  bands: ['B4','B3','B2'],
  min: 0, 
  max: 3000,  // Adjust for reflectance values
  gamma: 1.4
};

// 6. Display the final cloud-free mosaic
Map.addLayer(cloudFreeComposite, visParams, 'Landsat 8 Cloud-Free Composite');
Map.centerObject(roi, 8);  // Adjust zoom level to fit region
